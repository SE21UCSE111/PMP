{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function HomePage(){const navigate=useNavigate();const location=useLocation();const[studentProjects,setStudentProjects]=useState([]);const[studentName,setStudentName]=useState(\"Student\");useEffect(()=>{var _location$state;if((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.username){const username=location.state.username;setStudentName(username);}// Fetch projects dynamically based on student name\nconst fetchProjects=async()=>{try{const response=await fetch(\"http://localhost:8000/api/student-projects/\",{method:\"GET\",credentials:\"include\"});if(response.ok){const data=await response.json();setStudentProjects(data.projects);}else{console.error(\"Failed to fetch projects\");}}catch(error){console.error(\"Error fetching projects:\",error);}};fetchProjects();},[location.state]);const handleLogout=async()=>{try{const csrfToken=document.cookie.split(\"; \").find(row=>row.startsWith(\"csrftoken=\")).split(\"=\")[1];const response=await fetch(\"http://localhost:8000/api/logout/\",{method:\"POST\",credentials:\"include\",headers:{\"X-CSRFToken\":csrfToken}});if(response.ok){alert(\"Logout successful.\");navigate(\"/\");// Redirect to the homepage\n}else{alert(\"Logout failed.\");}}catch(error){console.error(\"Error logging out:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Hi \",studentName]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/professors\"),style:{marginBottom:\"20px\",padding:\"10px 20px\",backgroundColor:\"#007BFF\",color:\"#fff\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\"},children:\"New Project\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Your Projects\"}),/*#__PURE__*/_jsx(\"div\",{children:studentProjects&&studentProjects.length>0?studentProjects.map((project,index)=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>navigate(\"/dashboard/\".concat(project.id)),style:{border:\"1px solid #ccc\",margin:\"10px 0\",padding:\"10px\",cursor:\"pointer\",borderRadius:\"5px\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:project.name}),/*#__PURE__*/_jsx(\"p\",{children:project.description})]},index)):/*#__PURE__*/_jsx(\"p\",{children:\"No projects added yet. Click \\\"New Project\\\" to get started!\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{marginTop:\"20px\",padding:\"10px 20px\",backgroundColor:\"#FF6347\",color:\"#fff\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\"},children:\"Logout\"})]});}export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","jsxs","_jsxs","jsx","_jsx","HomePage","navigate","location","studentProjects","setStudentProjects","studentName","setStudentName","_location$state","state","username","fetchProjects","response","fetch","method","credentials","ok","data","json","projects","console","error","handleLogout","csrfToken","document","cookie","split","find","row","startsWith","headers","alert","style","padding","children","onClick","marginBottom","backgroundColor","color","border","borderRadius","cursor","length","map","project","index","concat","id","margin","name","description","marginTop"],"sources":["C:/Users/vssns/Downloads/PMP/myproject2/frontend/src/components/HomePage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\n\r\nfunction HomePage() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [studentProjects, setStudentProjects] = useState([]);\r\n  const [studentName, setStudentName] = useState(\"Student\");\r\n\r\n  useEffect(() => {\r\n    if (location.state?.username) {\r\n      const username = location.state.username;\r\n      setStudentName(username);\r\n    }\r\n\r\n    // Fetch projects dynamically based on student name\r\n    const fetchProjects = async () => {\r\n      try {\r\n        const response = await fetch(\"http://localhost:8000/api/student-projects/\", {\r\n          method: \"GET\",\r\n          credentials: \"include\",\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setStudentProjects(data.projects);\r\n        } else {\r\n          console.error(\"Failed to fetch projects\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching projects:\", error);\r\n      }\r\n    };\r\n\r\n    fetchProjects();\r\n  }, [location.state]);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      const csrfToken = document.cookie.split(\"; \").find((row) => row.startsWith(\"csrftoken=\")).split(\"=\")[1];\r\n\r\n      const response = await fetch(\"http://localhost:8000/api/logout/\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          \"X-CSRFToken\": csrfToken,\r\n        },\r\n      });\r\n\r\n      if (response.ok) {\r\n        alert(\"Logout successful.\");\r\n        navigate(\"/\"); // Redirect to the homepage\r\n      } else {\r\n        alert(\"Logout failed.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error logging out:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <h1>Hi {studentName}</h1>\r\n      <button\r\n        onClick={() => navigate(\"/professors\")}\r\n        style={{\r\n          marginBottom: \"20px\",\r\n          padding: \"10px 20px\",\r\n          backgroundColor: \"#007BFF\",\r\n          color: \"#fff\",\r\n          border: \"none\",\r\n          borderRadius: \"5px\",\r\n          cursor: \"pointer\",\r\n        }}\r\n      >\r\n        New Project\r\n      </button>\r\n\r\n      <h2>Your Projects</h2>\r\n      <div>\r\n        {studentProjects && studentProjects.length > 0 ? (\r\n          studentProjects.map((project, index) => (\r\n            <div\r\n              key={index}\r\n              onClick={() => navigate(`/dashboard/${project.id}`)}\r\n              style={{\r\n                border: \"1px solid #ccc\",\r\n                margin: \"10px 0\",\r\n                padding: \"10px\",\r\n                cursor: \"pointer\",\r\n                borderRadius: \"5px\",\r\n              }}\r\n            >\r\n              <h3>{project.name}</h3>\r\n              <p>{project.description}</p>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <p>No projects added yet. Click \"New Project\" to get started!</p>\r\n        )}\r\n      </div>\r\n\r\n      <button\r\n        onClick={handleLogout}\r\n        style={{\r\n          marginTop: \"20px\",\r\n          padding: \"10px 20px\",\r\n          backgroundColor: \"#FF6347\",\r\n          color: \"#fff\",\r\n          border: \"none\",\r\n          borderRadius: \"5px\",\r\n          cursor: \"pointer\",\r\n        }}\r\n      >\r\n        Logout\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}